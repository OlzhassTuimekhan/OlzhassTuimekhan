name: Generate Snake Animation

on:
  schedule:
    - cron: "0 0 * * *"      # —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  generate:
    runs-on: ubuntu-latest
    
    # üëá –í–û–¢ –≠–¢–û –ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨
    permissions:
      contents: write  # –î–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

    steps:
      # 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ
      - uses: actions/checkout@v4

      # 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º SVG-–∑–º–µ–π–∫—É
      - uses: Platane/snk@v3.2.0
        with:
          github_user_name: OlzhassTuimekhan
          outputs: |
            dist/github-contribution-grid-snake.svg
            dist/github-contribution-grid-snake-dark.svg?palette=github-dark

      # 3. –ü—É–±–ª–∏–∫—É–µ–º —Ñ–∞–π–ª –≤ –≤–µ—Ç–∫—É output
      - uses: crazy-max/ghaction-github-pages@v3
        with:
          target_branch: output    # –∫—É–¥–∞ –ø–æ–ª–æ–∂–∏–º svg
          build_dir: dist          # –æ—Ç–∫—É–¥–∞ –±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
